System.register("chunks:///_virtual/AudioCtr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,e,o,i,n,u,a,c,s;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,u=t._decorator,a=t.AudioSource,c=t.assert,s=t.Component}],execute:function(){var l,p,d,f,h;n._RF.push({},"91a7aLbJHhFN7Bj+c1kjTGn","AudioCtr",void 0);var y=u.ccclass,v=u.property;t("AudioCtr",(l=y("AudioCtr"),p=v(a),l((h=r((f=function(t){function r(){for(var r,e=arguments.length,n=new Array(e),u=0;u<e;u++)n[u]=arguments[u];return r=t.call.apply(t,[this].concat(n))||this,o(r,"_audioSource",h,i(r)),r}e(r,t);var n=r.prototype;return n.onLoad=function(){var t=this.node.getComponent(a);c(t),this._audioSource=t},n.start=function(){},n.update=function(t){},r}(s)).prototype,"_audioSource",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=f))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/Edage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RopeCtrl.ts"],(function(t){var n,o,e,i,r,a,c,l,s,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.BoxCollider2D,l=t.Contact2DType,s=t.Component},function(t){p=t.RopeCtrl}],execute:function(){var u,g,f,d,h;r._RF.push({},"1cbf18MWtpNq5CDyBLFZ/nq","Edage",void 0);var C=a.ccclass,y=a.property;t("Edage",(u=C("Edage"),g=y({type:p,tooltip:"碰撞时候需要处理绳子"}),u((h=n((d=function(t){function n(){for(var n,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,e(n,"rope",h,i(n)),n}o(n,t);var r=n.prototype;return r.onLoad=function(){for(var t=this.getComponents(c),n=0;n<t.length;n++){var o=t[n];o&&(console.log("Edage collider.tag: "+o.tag),console.log("Edage listen"),o.on(l.BEGIN_CONTACT,this.onBeginContact,this),o.on(l.END_CONTACT,this.onEndContact,this))}},r.start=function(){},r.update=function(t){},r.onBeginContact=function(t,n,o){this.rope.backWithNothing()},r.onEndContact=function(t,n,o){},n}(s)).prototype,"rope",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RopeCtrl.ts","./MsgCtrl.ts"],(function(t){var e,i,o,s,n,a,r,h,l,c,g,u,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,r=t.AudioClip,h=t.Node,l=t.AudioSource,c=t.randomRangeInt,g=t.Component},function(t){u=t.RopeCtrl},function(t){d=t.MsgCtrl}],execute:function(){var m,p,_,f,S,T,v,y,b;n._RF.push({},"d7b9f9Y3wNLfqg13e1eDkQR","GameMgr",void 0);var C=a.ccclass,A=a.property;t("GameMgr",(m=C("GameMgr"),p=A({type:u,tooltip:"控制绳子的组件"}),_=A({type:d,tooltip:"控制消息显示的组件"}),f=A({type:r,tooltip:""}),m((v=e((T=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,o(e,"rope",v,s(e)),o(e,"msg",y,s(e)),o(e,"clip_add_money",b,s(e)),e.total_score=0,e.stage=1,e.init_target=850,e.target=e.init_target,e.init_remaining=30,e.time_remaining=e.init_remaining,e.time_callback=null,e.audio_source=null,e}i(e,t);var n=e.prototype;return n.onLoad=function(){console.log("GameMgr onLoad!"),this.node.on(h.EventType.TOUCH_START,this.onTouchStart,this),this.rope.callLevelSuccess(this,this.levelSuccess.bind(this)),this.rope.callAddScore(this,this.addScore.bind(this)),this.msg.finalMsg(this.target,!1,!1),this.msg.updateScore(this.total_score),this.msg.updateTarget(this.target),this.msg.updateStage(this.stage),this.msg.node.getChildByName("next_button").active=!1,this.msg.node.getChildByName("restart_button").active=!1,this.audio_source=this.node.getComponent(l),this.time_callback=function(){0==this.time_remaining&&(this.total_score>=this.target?this.levelSuccess():this.levelFailed()),this.updateCountDown()}},n.start=function(){console.log("GameMgr start!");var t=this.time_remaining;this.schedule(this.time_callback,1,t,1)},n.update=function(t){},n.onTouchStart=function(){console.log("onTouchStart!"),this.rope.throwRope()},n.updateCountDown=function(){this.msg.updateCountDown(this.time_remaining),this.time_remaining=this.time_remaining-1},n.levelSuccess=function(){console.log("levelSuccess!"),this.rope.hideAllLoots(),this.rope.forceIdle(),this.unschedule(this.time_callback),this.node.off(h.EventType.TOUCH_START,this.onTouchStart,this);var t=c(0,30);this.target=this.target+(900+10*t),this.msg.finalMsg(this.target,!0,!0)},n.levelFailed=function(){console.log("levelFailed!"),this.rope.hideAllLoots(),this.rope.forceIdle(),this.unschedule(this.time_callback),this.node.off(h.EventType.TOUCH_START,this.onTouchStart,this),this.msg.finalMsg(this.target,!0,!1)},n.addScore=function(t){console.log("addScore!"),this.audio_source&&(console.log("addScore play audio!"),this.audio_source.playOneShot(this.clip_add_money,.5)),this.total_score=this.total_score+t,this.msg.showScoreAnimation(t),this.msg.updateScore(this.total_score)},n.enterNextStage=function(){console.log("enterNextStage on button!"),this.msg.finalMsg(this.target,!1,!0),this.stage+=1,this.msg.updateStage(this.stage),this.msg.updateTarget(this.target),this.rope.randomLootsAndShow(),this.time_remaining=this.init_remaining;var t=this.time_remaining;this.schedule(this.time_callback,1,t,1),this.node.on(h.EventType.TOUCH_START,this.onTouchStart,this)},n.restartStage=function(){console.log("restartStage on button!"),this.msg.finalMsg(this.target,!1,!1),this.rope.hideAllLoots(),this.rope.randomLootsAndShow(),this.time_remaining=this.init_remaining,this.total_score=0,this.target=this.init_target,this.stage=1,this.msg.updateScore(this.total_score),this.msg.updateTarget(this.target),this.msg.updateStage(this.stage);var t=this.time_remaining;this.schedule(this.time_callback,1,t,1),this.node.on(h.EventType.TOUCH_START,this.onTouchStart,this)},e}(g)).prototype,"rope",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(T.prototype,"msg",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(T.prototype,"clip_add_money",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=T))||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/Loot.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,o,i,a,e,s,r,l,h,c,g;return{setters:[function(t){n=t.inheritsLoose,o=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,a=t._decorator,e=t.Collider2D,s=t.Contact2DType,r=t.UITransform,l=t.randomRangeInt,h=t.v2,c=t.randomRange,g=t.Component}],execute:function(){var m;i._RF.push({},"931e344Hd5IvqE1qhmopnM8","Loot",void 0);var x=a.ccclass;a.property,t("Loot",x("Loot")(m=function(t){function i(){for(var n,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(n=t.call.apply(t,[this].concat(i))||this).callBackWithTargets_caller=null,n.callBackWithTarget_method=null,n.min_x=0,n.min_y=0,n.max_x=0,n.max_y=0,n}n(i,t);var a=i.prototype;return a.onLoad=function(){console.log("Loot onLoad");for(var t=this.getComponentsInChildren(e),n=0;n<t.length;n++){var o=t[n];o&&(console.log("Loot listen collider.tag: "+o.tag),o.on(s.BEGIN_CONTACT,this.onBeginContact,this),o.on(s.END_CONTACT,this.onEndContact,this))}this.hideAllLoots();var i=this.getComponent(r).getBoundingBoxToWorld();this.min_x=i.xMin,this.min_y=i.yMin,this.max_x=i.xMax,this.max_y=i.yMax,console.log("min ~ max: "+i.xMin+" ~ "+i.xMax+", "+i.yMin+" ~ "+i.yMax);var a=i.xMax-i.xMin,l=i.yMax-i.yMin;console.log("x_range: "+a+" , y_range: "+l),this.randomLootsAndShow()},a.start=function(){console.log("Loot start")},a.update=function(t){},a.onBeginContact=function(t,n,o){console.log("onBeginContact tag: "+t.tag),this.callBackWithTarget_method.call(this.callBackWithTargets_caller,t)},a.callBackWithTarget=function(t,n){this.callBackWithTargets_caller=t,this.callBackWithTarget_method=n},a.onEndContact=function(t,n,o){},a.isLootsRemaining=function(){for(var t=!1,n=this.getComponentsInChildren(e),o=0;o<n.length;o++){n[o].node.active&&(t=!0)}return t},a.hideAllLoots=function(){for(var t=this.getComponentsInChildren(e),n=0;n<t.length;n++)t[n].node.active=!1},a.randomLootsAndShow=function(){console.log("randomLootsAndShow +++ ");for(var t=this.getComponentsInChildren(e),n=0;n<8;n++){var o=l(0,t.length);t.splice(o,1)}var i=t.length,a=this.randomPoints(i);console.log("colliders.length: "+t.length+"     r_points.length "+a.length);for(n=0;n<a.length;n++){var s=a[n].x,r=a[n].y;t[n].node.setWorldPosition(s,r,0),t[n].node.active=!0}},a.randomPoints=function(t){for(var n=0,i=[];i.length<t&&!((n+=1)>=999);)if(0!=i.length){var a=c(this.min_x,this.max_x),e=c(this.min_y,this.max_y),s=h(a,e);if(!(h((this.max_x-this.min_x)/2+this.min_x,this.max_y).subtract(s).length()<(this.max_y-this.min_y)/3)){for(var r,l=999999,g=o(i);!(r=g()).done;){var m=r.value,x=h(m.x,m.y).subtract(s).length();x<l&&(l=x)}l>(this.max_y-this.min_y)/3&&i.push(s)}}else{var _=h(c(this.min_x,this.max_x),c(this.min_y,this.max_y));h((this.max_x-this.min_x)/2+this.min_x,this.max_y).subtract(_).length()<(this.max_y-this.min_y)/3||i.push(_)}return i},i}(g))||m);i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./AudioCtr.ts","./Edage.ts","./GameMgr.ts","./Loot.ts","./MsgCtrl.ts","./RopeCtrl.ts"],(function(){return{setters:[null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MsgCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,i,a,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.Animation,a=t.Label,s=t.Component}],execute:function(){var r;n._RF.push({},"eda1bKb0ldJLYk6+y/PS/xh","MsgCtrl",void 0);var g=o.ccclass;o.property,t("MsgCtrl",g("MsgCtrl")(r=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.start=function(){this.node.getChildByName("loot_score").getComponent(i).on(i.EventType.FINISHED,this.onAnimationEvent,this)},o.update=function(t){},o.onAnimationEvent=function(t,e){this.node.getChildByName("loot_score").active=!1},o.finalMsg=function(t,e,n){var o=this.node.getChildByName("final_msg");1==e?(1==n?(o.getComponent(a).string="恭喜!下一关目标: "+String(t),this.node.getChildByName("next_button").active=!0):(o.getComponent(a).string="失败,继续加油！",this.node.getChildByName("restart_button").active=!0),0==o.active&&(o.active=!0)):(1==n?1==this.node.getChildByName("next_button").active&&(this.node.getChildByName("next_button").active=!1):1==this.node.getChildByName("restart_button").active&&(this.node.getChildByName("restart_button").active=!1),1==o.active&&(o.active=!1))},o.updateStage=function(t){this.node.getChildByName("stage").getComponent(a).string=String(t)},o.updateTarget=function(t){this.node.getChildByName("target").getComponent(a).string=String(t)},o.updateCountDown=function(t){console.log("update time!"),this.node.getChildByName("time").active=!0,this.node.getChildByName("time").getComponent(a).string=String(t)},o.updateScore=function(t){console.log("updateScore!"),this.node.getChildByName("score").active=!0,this.node.getChildByName("score").getComponent(a).string=String(t)},o.showScoreAnimation=function(t){console.log("showScoreAnimation!");var e=this.node.getChildByName("loot_score");e.active=!0,e.getComponent(a).string="+"+String(t),e.getComponent(i).play()},n}(s))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/RopeCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Loot.ts"],(function(t){var o,e,i,l,n,s,a,r,c,h,d,u,p;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,l=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.CCFloat,r=t.AudioClip,c=t.AudioSource,h=t.UITransform,d=t.Vec2,u=t.Component},function(t){p=t.Loot}],execute:function(){var _,g,w,b,L,f,y,S,k,m,v,N,R,P,x,A,C,D,W;n._RF.push({},"6343bjMyHJHboAyRbfopEy2","RopeCtrl",void 0);var z=s.ccclass,I=s.property,B=0,T=1,H=2,U=function(){};U.LHS_Degree=-65,U.RHS_Degree=65,U.Idle_Len=120;t("RopeCtrl",(_=z("RopeCtrl"),g=I({type:a,tooltip:"绳子的摇摆速度"}),w=I({type:a,tooltip:"绳子的伸长速度"}),b=I({type:a,tooltip:"绳子的收回速度"}),L=I({type:p,tooltip:"战利品的组件"}),f=I({type:r,tooltip:""}),y=I({type:r,tooltip:""}),S=I({type:r,tooltip:""}),k=I({type:r,tooltip:""}),_((N=o((v=function(t){function o(){for(var o,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return o=t.call.apply(t,[this].concat(n))||this,i(o,"rollSpeed",N,l(o)),i(o,"growSpeed",R,l(o)),i(o,"backSpeed",P,l(o)),i(o,"loot",x,l(o)),i(o,"clip_release",A,l(o)),i(o,"clip_back",C,l(o)),i(o,"clip_big_gold",D,l(o)),i(o,"clip_diamond",W,l(o)),o.state=B,o.nowDegree=0,o.nowLen=U.Idle_Len,o.hand=null,o.nowLoot=null,o.loot_delta_x=NaN,o.loot_delta_y=NaN,o.callLevelSuccess_caller=null,o.callLevelSuccess_method=null,o.callAddScore_caller=null,o.callAddScore_method=null,o.audio_source=null,o}e(o,t);var n=o.prototype;return n.onLoad=function(){this.loot.callBackWithTarget(this,this.BackWithTarget.bind(this)),this.audio_source=this.node.getComponent(c)},n.start=function(){console.log("RopeCtrl start"),this.hand=this.node.getChildByName("game_hand"),this.setRopeLength(U.Idle_Len)},n.update=function(t){this.state===B?this.idleUpdate(t):this.state===T?this.growUpdate(t):this.state===H&&this.backUpdate(t)},n.callLevelSuccess=function(t,o){this.callLevelSuccess_caller=t,this.callLevelSuccess_method=o},n.callAddScore=function(t,o){this.callAddScore_caller=t,this.callAddScore_method=o},n.hideAllLoots=function(){this.loot.hideAllLoots()},n.randomLootsAndShow=function(){this.loot.randomLootsAndShow()},n.isLootsRemaining=function(){return this.loot.isLootsRemaining()},n.setRopeLength=function(t){this.getComponent(h).height=t;var o=this.hand.getComponent(h);if(this.hand.setPosition(this.hand.position.x,-(t+o.height/2)),this.nowLoot){if(Number.isNaN(this.loot_delta_x)&&Number.isNaN(this.loot_delta_y)){var e=this.nowLoot.worldPoints,i=null,l=1/0,n=new d(this.node.worldPosition.x,this.node.worldPosition.y);console.log("绳子的坐标：",n);for(var s=0;s<e.length;s++){var a=new d(e[s].x,e[s].y).subtract(n).length();a<l&&(l=a,i=new d(e[s].x,e[s].y))}console.log("最近的顶点坐标：",i),console.log("当前物品的世界坐标：",this.nowLoot.node.worldPosition);var r=i.x-this.nowLoot.node.worldPosition.x,c=i.y-this.nowLoot.node.worldPosition.y;console.log("d_x: ",r),console.log("d_y: ",c),this.nowLoot.node.setWorldPosition(this.hand.worldPosition.x-r,this.hand.worldPosition.y-c,0),this.loot_delta_x=this.hand.worldPosition.x-this.nowLoot.node.worldPosition.x,this.loot_delta_y=this.hand.worldPosition.y-this.nowLoot.node.worldPosition.y,console.log("delta : "+this.loot_delta_x+","+this.loot_delta_y)}this.nowLoot.node.setWorldPosition(this.hand.worldPosition.x-this.loot_delta_x,this.hand.worldPosition.y-this.loot_delta_y,0)}},n.throwRope=function(){console.log("throwRope"),this.state==B&&(this.audio_source&&(console.log("throwRope paly audio"),this.audio_source.playOneShot(this.clip_release,.5)),this.state=T)},n.forceIdle=function(){console.log("force idle"),this.state=B,this.nowLoot&&(this.nowLoot.node.active=!1),this.nowLoot=null,this.backSpeed=300,this.loot_delta_x=NaN,this.loot_delta_y=NaN},n.BackWithTarget=function(t){if(console.log("BackWithTarget"),this.state==T){var o=null;switch(this.nowLoot=t,this.nowLoot.tag){case 1:this.backSpeed=60,o=this.clip_big_gold;break;case 2:this.backSpeed=100;break;case 3:this.backSpeed=150;break;case 10:this.backSpeed=65;break;case 11:this.backSpeed=110;break;case 20:case 21:this.backSpeed=150,o=this.clip_diamond}null!=this.audio_source&&null!=o?(console.log("BackWithTarget play audio!"),this.audio_source.state==c.AudioState.PLAYING&&this.audio_source.stop(),this.audio_source.playOneShot(o,.5)):console.log("BackWithTarget play audio failed due to unsupported"),this.state=H}},n.backWithNothing=function(){console.log("backWithNothing"),this.state==T&&(this.state=H)},n.growUpdate=function(t){this.nowLen+=this.growSpeed*t,this.setRopeLength(this.nowLen)},n.backUpdate=function(t){if(this.nowLen-=this.backSpeed*t,this.setRopeLength(this.nowLen),this.nowLen<=U.Idle_Len){if(this.nowLen=U.Idle_Len,this.nowLoot){var o=0;switch(this.nowLoot.tag){case 1:o=300;break;case 2:o=150;break;case 3:case 10:o=50;break;case 11:o=10;break;case 20:o=150;break;case 21:o=300}this.callAddScore_method.call(this.callAddScore_caller,o),this.nowLoot.node.active=!1,this.nowLoot=null,this.backSpeed=300,this.loot_delta_x=NaN,this.loot_delta_y=NaN,this.isLootsRemaining()||this.callLevelSuccess_method.call(this.callLevelSuccess_caller),console.log("BackWithTarget done")}this.state=B}},n.idleUpdate=function(t){this.nowLen=U.Idle_Len,this.setRopeLength(this.nowLen),this.nowDegree+=this.rollSpeed*t,this.node.angle=this.nowDegree,(this.nowDegree<=U.LHS_Degree&&this.rollSpeed<0||this.nowDegree>=U.RHS_Degree&&this.rollSpeed>0)&&(this.rollSpeed=-this.rollSpeed)},o}(u)).prototype,"rollSpeed",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 120}}),R=o(v.prototype,"growSpeed",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),P=o(v.prototype,"backSpeed",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),x=o(v.prototype,"loot",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=o(v.prototype,"clip_release",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=o(v.prototype,"clip_back",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=o(v.prototype,"clip_big_gold",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=o(v.prototype,"clip_diamond",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=v))||m));n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});